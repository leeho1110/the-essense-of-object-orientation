# 객체지향의 사실과 오해 PART 5 : 책임과 메시지

### 자율적인 책임

자율적인 객체란 **스스로의 의지와 판단에 따라 각자 맡은 책임을 수행하는 객체**를 의미한다. 따라서 협력에 참여하는 객체가 얼마나 자율적인지가 전체 애플리케이션의 품질을 결정한다. 객체가 자율적이기 위해서는 객체에게 할당되는 책임의 수준 역시 자율적이여야 한다는 사실을 명심해야한다.

---

### 메시지와 메서드

우리는 객체의 행동을 유발하는 행위를 가리켜 *메시지-전송* 이라고 한다. 또한 우리는 행위를 *메시지 이름* 으로, 필요한 추가 정보들은 *인자(argument)* 를 통해 객체에게 메시지를 전송한다. 

> *ex. **MESSAGE** : 증언하라(언제, 어디서)*
> 

근본적으로 메시지의 개념은 책임의 개념과 연결된다. 객체간의 유일한 의사소통(요청,응답)은 메시지이기에 송신자는 메시지 전송을 통해 다른 객체의 책임을 요청하고, 수신자는 오직 메시지 수신을 통해서만 자신의 책임을 수행한다. 즉, 객체간 발송되는 **메시지의 모양이 객체가 수행할 책임의 모양을 결정**한다.

그렇다면 이 때 수신자는 본인의 책임을 어떻게 처리할까. 위 설명에서 *‘메시지’* 와 메시지를 처리하기 위해 선택하는 *‘방법’* 은 다른 개념이었다. 우리는 수신자가 메시지를 처리하기 위해 내부적으로 선택하는 방법을 **메서드** 라고 한다.

> ***MESSAGE*** : 다른 객체에게 ‘*무엇 ‘*을 요청해야할지 이름과 인자를 통해 나타내는 수단
***METHOD*** : 수신한 메시지를 객체 내부적으로 ‘*어떻게 ‘* 처리할지 선택한 방법
> 

이 둘의 차이는 객체지향의 핵심 개념인 *다형성* 과  관련이 깊다. 이는 서로 다른 유형의 객체가 동일한 메시지에 대해 서로 다르게 반응하는 것을 의미한다. 즉 동일한 역할을 수행할 수 있는 객체들 사이의 **대체 가능성**을 의미한다. 

이는 수신자의 종류를 캡슐화한다는 것을 의미한다. 송신자는 수신자가 어떤 객체인지 알 필요가 없다. 역할만 수행할 수 있다면 어떤 객체와도 협력이 가능하다. 따라서 송신자에게 영향을 주지 않고도 메시지를 수신할 객체(수신자)의 타입을 자유롭게 추가할 수 있다.

---

### 메시지를 따라라

수신자와 송신자는 ‘메시지’라는 얇은 끈으로만 이어져 있다. 메시지를 기반으로 한 두 객체 사이의 이 낮은 결합도가 바로 좋은 설계의 비결이다. 클래스가 코드를 구현하기 위해 사용할 수 있는 중요한 추상화 도구이긴 하지만 객체지향의 강력함은 **클래스가 아닌 객체들이 주고받는 메시지**로부터 나온다. 

> *객체지향 설계는 적절한 책임을 적절한 객체에게 할당하면서 메시지를 기반으로 협력하는 객체들의 관계를 발견하는 과정이다. 이처럼 책임을 완수하기 위해 협력하는 객체들을 이용해 시스템을 설계하는 방법을 **책임-주도 설계** 라고 한다.*
> 

책임 주도 설계의 핵심은 **What/Who 사이클** 이다. ‘어떤 행위(what)’를 수행할 것인지 결정한 후 ‘누가(who)’ 그 행위를 수행할 것인지를 결정해야 한다는 것이다. 여기서 ‘어떤 행위’가 바로 메시지다.

어떤 메시지(무엇)가 필요한지 결정된 후에 메시지를 처리할 적합한 객체를 선택해야 한다. 이 방법에선 메시지를 결정하는 시점에 어떤 객체가 수신자가 될 지 모른다. 이는 수신자의 캡슐화를 증진시키며 자연스럽게 송신자와 수신자의 결합도는 낮아진다.

중요한 것은 객체가 자신이 수신할 메시지를 결정하게 하지 말고, **메시지가 협력에 필요한 객체를 발견**하게 해야 한다는 것이다. 수신자는 메시지의 의미를 이해하고 송신자의 의도대로 요청을 처리할 수만 있으면 된다.

---

### 객체 인터페이스

우리는 다른 사물과 상호작용하기 위한 방법들을 인터페이스라고 한다. 예를 들자면 TV를 시청하기 위한 리모콘, 자동차의 움직임을 제어하기 위한 핸들, 엑셀, 브레이크, 계기판 등이다. 아래는 인터페이스의 세 가지의 특성이다. 이를 객체에 대입해서 살펴보자.

1. **인터페이스의 사용법만 알고 있으면 내부 구조나 동작 방법을 몰라도 상호작용이 가능하다.**
    
    *객체의 인터페이스는 객체가 수신할 수 있는 메시지의 목록이다. 송신자는 메시지를 통해 수신자와 상호작용하지만 수신자의 내부 구조나 동작 방법을 모른다.*
    
2. **내부 구성,작동 방식이 변경되어도 인터페이스가 그대로라면 사용자에게는 어떤 영향도 없다.**
    
    *수신자의 내부 구성과 작동 방식이 변경되어도 메시지가 그대로라면 송신자에게는 어떤 영향도 없다.*
    
3. **인터페이스가 동일하다면 어떤 대상과도 상호작용이 가능하다.**
    
    *메시지가 동일하다면 수신자가 어떤 객체여도 상호작용이 가능하다.*
    

---

### 인터페이스와 구현의 분리

아래는 객체지향적인 사고 방식을 이해하기 위한 세 가지 원칙이다.

1. **좀 더 추상적인 인터페이스**
    
    상세한 수준의 메시지는 금한다. 어떻게 메시지를 처리할지는 객체 마음이다. 자율성을 저해하지 말아라.
    
2. **최소 인터페이스**
    
    외부에서 사용할 필요가 없는 인터페이스는 최대한 노출하지 말아라. 내부 처리를 위해 필요한 본인에게만 필요한 메시지까지 노출할 이유는 없다.
    
3. **인터페이스와 구현 간에 차이가 있다는 점을 인식**
    
    훌륭한 객체란 구현을 모른 채 인터페이스만 알면 쉽게 상호작용할 수 있는 객체다. 이것은 객체를 설계할 때 외부에 노출되는 인터페이스와 내부에 숨겨지는 구현을 명확하게 분리해야한다는 것을 의미한다.
    
    객체가 가져야 할 상태와 메서드 구현은 객체 내부에 속한다. 객체 외부에 영향을 끼치는 변경은 객체의 공용 인터페이스를 수정할 때뿐이다.
    

---

### 책임의 자율성이 협력의 품질을 결정한다

좋은 협력은 다른 협력보다 이해하기 쉽고 변경에 유연하다. 그리고 객체의 책임이 자율적일수록 협력이 이해하기 쉬워지고 유연하게 변경할 수 있게 된다. 결과적으로 책임이 얼마나 자율적인지가 전체적인 협력의 설계 품질을 결정하게 된다. 

그 이유는 ***첫째, 자율적인 책임은 협력을 단순하게 만든다.*** 수신자에게 어떻게 메시지를 처리할 것인지 송신자에게 물어볼 필요 없이 단순히 책임만 다하면 된다. 만약 송신자가 처리하는 데에 조건을 송신자가 물어본다면 객체의 자율성은 사라진다.

***둘째, 자율적인 책임은 객체의 외부와 내부를 명확하게 분리한다.***  수신자가 메시지를 어떻게 처리할 것인지는 본인에게 달려있다. 하지만 처리 방법을 송신자가 지정하게 된다면 불행하게도 내부를 노출할 가능성이 생긴다. 따라서 자율적인 책임은 객체의 외부와 내부를 분리하는 것에 필요하다.

***셋째, 책임이 자율적일 경우 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 끼치지 않는다.*** 만약 송신자가 처리 방법을 지정한다면 수신자가 책임을 수행할 때 방법을 변경하는 경우 외부에 송신자에게 영향을 끼칠 수 있다. 

***넷째, 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있는 유연성을 제공한다.*** 우린 자율적인 책임을 통해 유연한 설계와 높은 재사용성을 가질 수 있다. 메시지를 처리하기만 한다면 수신자가 누구든 송신자는 신경쓰지 않는다. 하지만 만약 송신자가 수신자의 대상을 지정한다면? 대상을 다양하게 선택하는 것은 꿈도 꿀 수 없다. 

***다섯째, 객체가 수행하는 책임들이 자율적일수록 객체의 역할을 이해하기 쉬워진다.*** 

> 우리는 자율적인 책임을 통해 *적절한 추상화, 높은 응집도, 낮은 결합도, 증진된 캡슐화, 인터페이스와 구현의 명확한 분리, 유연한 설계, 재사용성* 이라는 수많은 이점을 가질 수 있다.
>